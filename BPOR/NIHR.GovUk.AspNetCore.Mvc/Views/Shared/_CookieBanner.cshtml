@inject GovUkOptions options

@{
    string? cookieText = options.Cookies?.Mode switch
    {
        CookieMode.Additional => "We’d like to set additional cookies so we can remember your settings, understand how people use the service and make improvements.",
        CookieMode.Analytics => "We’d also like to use analytics cookies so we can understand how you use the service and make improvements.",
        _ => null
    };

    string? buttonText = options.Cookies?.Mode switch
    {
        CookieMode.Additional => "additional",
        CookieMode.Analytics => "analytics",
        _ => null
    };
}

@if(options.Cookies is not null && options.Cookies.Mode != CookieMode.Essential)
{
    <form action="/form-handler" method="post" novalidate>
        <div id="cookies" class="govuk-cookie-banner" data-nosnippet role="region" aria-label="Cookies on @options.ServiceName">
            <div class="govuk-cookie-banner__message govuk-width-container">
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-two-thirds">
                        <h2 class="govuk-cookie-banner__heading govuk-heading-m">
                            Cookies on @options.ServiceName
                        </h2>
                        <div class="govuk-cookie-banner__content">
                            <p class="govuk-body">We use some essential cookies to make this service work.</p>
                            <p class="govuk-body">@cookieText</p>
                        </div>
                    </div>
                </div>
                <div class="govuk-button-group">
                    <button value="yes" type="submit" name="cookies[@buttonText]" class="govuk-button" data-module="govuk-button">
                        Accept @buttonText cookies
                    </button>
                    <button value="no" type="submit" name="cookies[@buttonText]" class="govuk-button" data-module="govuk-button">
                        Reject @buttonText cookies
                    </button>
                    <a class="govuk-link" href=@options.Cookies.PolicyLink>View cookies</a>
                </div>
            </div>
        </div>
    </form>

    <template id="confirmationMessageTemplate">
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-two-thirds">
                        <div class="govuk-cookie-banner__content">
                            <p class="govuk-body">You’ve <span class="user-decision"></span> additional cookies. You can <a class="govuk-link" href=@options.Cookies.PolicyLink> View our cookie policy for more information</a> at any time.</p>
                        </div>
                    </div>
                </div>
                <div class="govuk-button-group">
                    <button draggable="false" class="govuk-button hide-banner-btn" onclick="closeCookieBanner()" tabindex="0">
                        Hide cookie message
                    </button>
                </div>
    </template>

    <script>
        globalThis.cookieDomain = @Json.Serialize(options.Cookies.Domain)
    </script>
}